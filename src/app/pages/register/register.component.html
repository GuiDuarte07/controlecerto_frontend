<div
  class="w-screen h-screen flex justify-center overflow-hidden items-center bg-gradient-to-r from-teal-400 to-teal-700"
>
  <div class="flex items-center flex-col h-full w-full">
    <div class="flex-1 flex items-center h-full justify-center w-full">
      <section class="px-8 py-6 bg-gray-50 rounded-lg h-full w-full shadow-xl md:w-[400px]">
        <form (submit)="register()" [formGroup]="registerForm" class="">
          <div class="text-center">
            <span
              class="material-symbols-outlined text-teal-600 text-5xl"
              style="font-variation-settings: 'FILL' 1"
            >
              account_circle
            </span>
          </div>
          <h2
            class="text-center text-2xl font-bold text-gray-600 mb-4 mt-2 block dark:text-white"
          >
            Cadastre-se
          </h2>

          <div>
            <div class="mb-3">
              <label
                for="name"
                class="text-slate-500 pb-1 text-sm font-semibold"
                >Nome</label
              >
              <div class="relative">
                <input
                  formControlName="name"
                  type="text"
                  id="name"
                  class="input"
                  style="padding-right: 2.25rem"
                  placeholder="Seu nome"
                  required
                />
                <span
                  class="material-symbols-outlined text-slate-400 absolute top-1/2 right-2 transform -translate-y-1/2 pointer-events-none"
                >
                  person
                </span>
              </div>
            </div>
            <div *ngIf="registerForm.get('name')?.errors && registerForm.get('name')?.touched">
              <p class="text-sm text-red-600" *ngIf="registerForm.get('name')?.errors?.['required']">Nome é obrigatório.</p>
              <p class="text-sm text-red-600" *ngIf="registerForm.get('name')?.errors?.['minlength']">Nome deve ter no mínimo 3 caracteres.</p>
              <p class="text-sm text-red-600" *ngIf="registerForm.get('name')?.errors?.['maxlength']">Nome deve ter no máximo 100 caracteres.</p>
              <p class="text-sm text-red-600" *ngIf="registerForm.get('name')?.errors?.['pattern']">Nome deve conter apenas letras e espaços.</p>
            </div>
          </div>

          <div>
            <div class="mb-3">
              <label
                for="email"
                class="text-slate-500 pb-1 text-sm font-semibold"
                >E-mail</label
              >
              <div class="relative">
                <input
                  formControlName="email"
                  type="text"
                  id="email"
                  class="input"
                  style="padding-right: 2.25rem"
                  placeholder="user@email.com"
                  required
                />
                <span
                  class="material-symbols-outlined text-slate-400 absolute top-1/2 right-2 transform -translate-y-1/2 pointer-events-none"
                >
                  mail
                </span>
              </div>

              
            </div>
            <div *ngIf="registerForm.get('email')?.errors && registerForm.get('email')?.touched">
              <p class="text-sm text-red-600" *ngIf="registerForm.get('email')?.errors?.['required']">Email é obrigatório.</p>
              <p class="text-sm text-red-600" *ngIf="registerForm.get('email')?.errors?.['minlength']">Email deve ter no mínimo 3 caracteres.</p>
              <p class="text-sm text-red-600" *ngIf="registerForm.get('email')?.errors?.['maxlength']">Email deve ter no máximo 100 caracteres.</p>
              <p class="text-sm text-red-600" *ngIf="registerForm.get('email')?.errors?.['email']">Email deve ser válido.</p>
            </div>
          </div>

          <div>
            <div class="mb-3">
              <label
                for="password"
                class="text-slate-500 pb-1 text-sm font-semibold"
                >Senha</label
              >
              <div class="relative">
                <input
                  formControlName="password"
                  [type]="passwordVisibility ? 'text' : 'password'"
                  id="password"
                  class="input"
                  style="padding-right: 2.25rem"
                  placeholder="•••••••••"
                  required
                />
                <button
                  (click)="setPasswordVisibility()"
                  type="button"
                  class="absolute top-1/2 right-2 transform -translate-y-1/2 cursor-pointer flex justify-center items-center"
                >
                  @if (passwordVisibility) {
                  <span class="material-symbols-outlined text-slate-400">
                    visibility_off
                  </span>
                  }@else {
                  <span class="material-symbols-outlined text-slate-400">
                    visibility
                  </span>
                  }
                </button>
              </div>
              
            </div>
            <div *ngIf="registerForm.get('password')?.errors && registerForm.get('password')?.touched">
              <P class="text-sm text-red-600" *ngIf="registerForm.get('password')?.errors?.['required']">Senha é obrigatória.</P>
              <P class="text-sm text-red-600" *ngIf="registerForm.get('password')?.errors?.['minlength']">Senha deve ter no mínimo 3 caracteres.</P>
              <P class="text-sm text-red-600" *ngIf="registerForm.get('password')?.errors?.['maxlength']">Senha deve ter no máximo 100 caracteres.</P>
            </div>
          </div>

          @if(fromServerError) {
            <p class="text-sm my-2 text-red-600">houve um erro: {{fromServerError}}</p>
          }

          <div class="mt-8 w-full flex md:flex-row flex-col items-center gap-6">
            <button
              [disabled]="!registerForm.valid || loading"
              type="submit"
              class="disabled:bg-slate-400 px-9 py-2 bg-teal-600 text-white font-semibold text-sm rounded-lg flex gap-2 items-center"
            >
            @if (loading) {
              <div class="px-8 py-1">
                <mat-spinner diameter="20"></mat-spinner>
              </div>
            }  @else {
              Registar
              <span
                class="text-white text-lg font-bold material-symbols-outlined"
              >
                arrow_forward
              </span>
            }
              
            </button>

            <p class="text-sm text-slate-500">
              Fazer
              <a
                routerLink="/login"
                class="cursor-pointer text-blue-600 mr-2 hover:text-blue-800"
                >login</a
              >
            </p>
          </div>

        </form>
      </section>
    </div>

    <footer class="hidden w-full my-2">
      <p class="text-sm text-white">
        &copy; 2024 FinanTech. All rights reserved | Made by Guilherme Duarte.
      </p>
      <p></p>
    </footer>
  </div>
</div>
